# The Morning Paper Epub

Scrap The Morning Paper blog to generate an ebook in Epub format.


## How it works?

The program iterates over the URLs https://blog.acolyer.org/page/{number}/
and search elements having the CSS class "post" such as the following one:

```html
  <div id="post-1150" class="post-1150 post type-post status-publish format-standard hentry category-security">
    <div class="post-header">
      <h2>
        <a href="https://blog.acolyer.org/2015/09/15/md5-to-be-considered-harmful-someday/" rel="bookmark">
          MD5 To Be Considered Harmful&nbsp;Someday
        </a>
      </h2>
      <div class="date">September 15, 2015</div>
	</div><!--end post header-->
	<div class="meta clear">
      <div class="tags"></div>
      <div class="author"></div>
    </div><!--end meta-->
	<div class="entry clear">
      <!-- raw HTML to include -->
      ...
    </div>
  </div>
```

The program generates a new chapter for each post. Internally, the program delegates to the [PyPub library](https://github.com/wcember/pypub)


## Installing

```
$ git clone https://github.com/julien-sobczak/the-morning-paper-epub.git
$ cd the-morning-paper-epub
$ virtualenv env
$ source env/bin/active
$ pip install -r requirements.txt
```


## RunningÂ 

To generate an epub containing the full blog content:

```
$ python main.py
# Output to "TheMorningPaper.epub"
```

You can use a date range to filter the posts to export:

```
$ python main.py --start 2017-01-01 --end 2017-04-01 --filename The\ Morning\ Paper\ 2017\ -\ 1st-Quarter
# Output to "The Morning Paper 2017 - 1st Quarter.epub"
```


## Archives

Epubs generated by this program are present under the `epubs` directory.
The epub sizes are small enough to be read like a book (~ 400 pages).


## Known issue

The generated Epubs display property in *Calibre* viewer but only the first sentence of each chapter is displayed in *Adobe Digital Editions* and on my Kobo eReader.

To fix this problem, a possible workaround is to convert the Epub to mobi using Calibre, before converting it back to Epub. The file converted using this process are also present under the `epubs` directory and are marked with "converted" in their filename.
